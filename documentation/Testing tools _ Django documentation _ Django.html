<!DOCTYPE html>
<!-- saved from url=(0059)https://docs.djangoproject.com/en/1.8/topics/testing/tools/ -->
<html lang="en" class=" mdzr-js mdzr-borderradius mdzr-boxshadow mdzr-cssanimations mdzr-svg"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="ROBOTS" content="ALL">
    <meta http-equiv="imagetoolbar" content="no">
    <meta name="MSSmartTagsPreventParsing" content="true">
    <meta name="Copyright" content="Django Software Foundation">
    <meta name="keywords" content="Python, Django, framework, open-source">
    <meta name="description" content="">

    <!-- Favicons -->
    <link rel="apple-touch-icon" href="https://docs.djangoproject.com/s/img/icon-touch.e4872c4da341.png">
    <link rel="icon" sizes="192x192" href="https://docs.djangoproject.com/s/img/icon-touch.e4872c4da341.png">
    <link rel="shortcut icon" href="https://docs.djangoproject.com/s/img/favicon.6dbf28c0650e.ico">
    <meta name="msapplication-TileColor" content="#113228">
    <meta name="msapplication-TileImage" content="/s/img/icon-tile.b01ac0ef9f67.png">

    <title>Testing tools | Django documentation | Django</title>

    <!--[if lte IE 8]>
        <link rel="stylesheet" href="/s/css/output-ie.02a0f90a8359.css" >
     <![endif]-->
    <!--[if gt IE 8]><!-->
        <link rel="stylesheet" href="./Testing tools _ Django documentation _ Django_files/output.5c6820f19a51.css">
    <!--<![endif]-->
    <script src="./Testing tools _ Django documentation _ Django_files/webfontloader.e75218f5f090.js"></script><style type="text/css"></style>
    <link rel="stylesheet" href="./Testing tools _ Django documentation _ Django_files/css"><script>
    WebFont.load({
      custom: {
        families: ['FontAwesome', 'Fira+Mono'],
      },
      google: {
        families: ['Roboto:400italic,700italic,300,700,400:latin'
        ]
      },
      classes: false,
      events: false,
      timeout: 1000
    });
    </script>
    <script src="./Testing tools _ Django documentation _ Django_files/modernizr.3b36762e418a.js"></script>
    
  
  <link rel="canonical" href="https://docs.djangoproject.com/en/stable/topics/testing/tools/">
  
  <link rel="search" type="application/opensearchdescription+xml" href="https://docs.djangoproject.com/en/1.8/search/description/" title="Django documentation">

  </head>

  <body id="generic" class="">

    <div role="banner" id="top">
  <div class="container">
    <a class="logo" href="https://www.djangoproject.com/">Django</a>
    <p class="meta">The web framework for perfectionists with deadlines.</p>
    <div role="navigation">
      <ul>
        <li>
          <a href="https://www.djangoproject.com/start/overview/">Overview</a>
        </li>
        <li>
          <a href="https://www.djangoproject.com/download/">Download</a>
        </li>
        <li class="active">
          <a href="https://docs.djangoproject.com/">Documentation</a>
        </li>
        <li>
          <a href="https://www.djangoproject.com/weblog/">News</a>
        </li>
        <li>
          <a href="https://www.djangoproject.com/community/">Community</a>
        </li>
        <li>
          <a href="https://code.djangoproject.com/">Code</a>
        </li>
        <li>
          <a href="https://www.djangoproject.com/foundation/">About</a>
        </li>
        <li>
          <a href="https://www.djangoproject.com/fundraising/">♥ Donate</a>
        </li>
      </ul>
    </div>
  </div>
</div>


    <div class="copy-banner">
      <div class="container">
        
  <h1><a href="https://docs.djangoproject.com/en/1.8/">Documentation</a></h1>

      </div>
    </div>
    <div id="billboard"></div>

    <div class="container sidebar-right">
      <div role="main">
        

<ul id="doc-versions" class="version-switcher">
  
  
  <li class="other">
    
    <a href="https://docs.djangoproject.com/en/1.6/topics/testing/tools/">1.6</a>
    
  </li>
  
  
  
  <li class="other">
    
    <a href="https://docs.djangoproject.com/en/1.7/topics/testing/tools/">1.7</a>
    
  </li>
  
  
  
  
  
  <li class="other">
    
    <a href="https://docs.djangoproject.com/en/1.9/topics/testing/tools/">1.9</a>
    
  </li>
  
  
  
  <li class="other">
    
    <a href="https://docs.djangoproject.com/en/dev/topics/testing/tools/">dev</a>
    
  </li>
  
  
  <li class="current" title="This document describes Django 1.8. Click on the links on the left to see other versions.">
  <span>Documentation version:
    <strong>1.8
      </strong>
    </span>
  </li>
</ul>


<div id="docs-content">
<div class="section" id="s-testing-tools">
<span id="testing-tools"></span><h1>Testing tools<a class="headerlink" href="https://docs.djangoproject.com/en/1.8/topics/testing/tools/#testing-tools" title="Permalink to this headline">¶</a></h1>
<p>Django provides a small set of tools that come in handy when writing tests.</p>
<div class="section" id="s-the-test-client">
<span id="s-test-client"></span><span id="the-test-client"></span><span id="test-client"></span><h2>The test client<a class="headerlink" href="https://docs.djangoproject.com/en/1.8/topics/testing/tools/#the-test-client" title="Permalink to this headline">¶</a></h2>
<p>The test client is a Python class that acts as a dummy Web browser, allowing
you to test your views and interact with your Django-powered application
programmatically.</p>
<p>Some of the things you can do with the test client are:</p>
<ul class="simple">
<li>Simulate GET and POST requests on a URL and observe the response –
everything from low-level HTTP (result headers and status codes) to
page content.</li>
<li>See the chain of redirects (if any) and check the URL and status code at
each step.</li>
<li>Test that a given request is rendered by a given Django template, with
a template context that contains certain values.</li>
</ul>
<p>Note that the test client is not intended to be a replacement for <a class="reference external" href="http://seleniumhq.org/">Selenium</a> or
other “in-browser” frameworks. Django’s test client has a different focus. In
short:</p>
<ul class="simple">
<li>Use Django’s test client to establish that the correct template is being
rendered and that the template is passed the correct context data.</li>
<li>Use in-browser frameworks like <a class="reference external" href="http://seleniumhq.org/">Selenium</a> to test <em>rendered</em> HTML and the
<em>behavior</em> of Web pages, namely JavaScript functionality. Django also
provides special support for those frameworks; see the section on
<a class="reference internal" href="https://docs.djangoproject.com/en/1.8/topics/testing/tools/#django.test.LiveServerTestCase" title="django.test.LiveServerTestCase"><tt class="xref py py-class docutils literal"><span class="pre">LiveServerTestCase</span></tt></a> for more details.</li>
</ul>
<p>A comprehensive test suite should use a combination of both test types.</p>
<div class="section" id="s-overview-and-a-quick-example">
<span id="overview-and-a-quick-example"></span><h3>Overview and a quick example<a class="headerlink" href="https://docs.djangoproject.com/en/1.8/topics/testing/tools/#overview-and-a-quick-example" title="Permalink to this headline">¶</a></h3>
<p>To use the test client, instantiate <tt class="docutils literal"><span class="pre">django.test.Client</span></tt> and retrieve
Web pages:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">django.test</span> <span class="kn">import</span> <span class="n">Client</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s">'/login/'</span><span class="p">,</span> <span class="p">{</span><span class="s">'username'</span><span class="p">:</span> <span class="s">'john'</span><span class="p">,</span> <span class="s">'password'</span><span class="p">:</span> <span class="s">'smith'</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span>
<span class="go">200</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">'/customer/details/'</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span><span class="o">.</span><span class="n">content</span>
<span class="go">b'&lt;!DOCTYPE html...'</span>
</pre></div>
</div>
<p>As this example suggests, you can instantiate <tt class="docutils literal"><span class="pre">Client</span></tt> from within a session
of the Python interactive interpreter.</p>
<p>Note a few important things about how the test client works:</p>
<ul>
<li><p class="first">The test client does <em>not</em> require the Web server to be running. In fact,
it will run just fine with no Web server running at all! That’s because
it avoids the overhead of HTTP and deals directly with the Django
framework. This helps make the unit tests run quickly.</p>
</li>
<li><p class="first">When retrieving pages, remember to specify the <em>path</em> of the URL, not the
whole domain. For example, this is correct:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">'/login/'</span><span class="p">)</span>
</pre></div>
</div>
<p>This is incorrect:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">'http://www.example.com/login/'</span><span class="p">)</span>
</pre></div>
</div>
<p>The test client is not capable of retrieving Web pages that are not
powered by your Django project. If you need to retrieve other Web pages,
use a Python standard library module such as <a class="reference external" href="https://docs.python.org/3/library/urllib.html#module-urllib" title="(in Python v3.5)"><tt class="xref py py-mod docutils literal"><span class="pre">urllib</span></tt></a>.</p>
</li>
<li><p class="first">To resolve URLs, the test client uses whatever URLconf is pointed-to by
your <a class="reference internal" href="https://docs.djangoproject.com/en/1.8/ref/settings/#std:setting-ROOT_URLCONF"><tt class="xref std std-setting docutils literal"><span class="pre">ROOT_URLCONF</span></tt></a> setting.</p>
</li>
<li><p class="first">Although the above example would work in the Python interactive
interpreter, some of the test client’s functionality, notably the
template-related functionality, is only available <em>while tests are
running</em>.</p>
<p>The reason for this is that Django’s test runner performs a bit of black
magic in order to determine which template was loaded by a given view.
This black magic (essentially a patching of Django’s template system in
memory) only happens during test running.</p>
</li>
<li><p class="first">By default, the test client will disable any CSRF checks
performed by your site.</p>
<p>If, for some reason, you <em>want</em> the test client to perform CSRF
checks, you can create an instance of the test client that
enforces CSRF checks. To do this, pass in the
<tt class="docutils literal"><span class="pre">enforce_csrf_checks</span></tt> argument when you construct your
client:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">django.test</span> <span class="kn">import</span> <span class="n">Client</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">csrf_client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">(</span><span class="n">enforce_csrf_checks</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="s-making-requests">
<span id="making-requests"></span><h3>Making requests<a class="headerlink" href="https://docs.djangoproject.com/en/1.8/topics/testing/tools/#making-requests" title="Permalink to this headline">¶</a></h3>
<p>Use the <tt class="docutils literal"><span class="pre">django.test.Client</span></tt> class to make requests.</p>
<dl class="class">
<dt id="django.test.Client">
<em class="property">class </em><tt class="descname">Client</tt>(<em>enforce_csrf_checks=False</em>, <em>**defaults</em>)<a class="headerlink" href="https://docs.djangoproject.com/en/1.8/topics/testing/tools/#django.test.Client" title="Permalink to this definition">¶</a></dt>
<dd><p>It requires no arguments at time of construction. However, you can use
keywords arguments to specify some default headers. For example, this will
send a <tt class="docutils literal"><span class="pre">User-Agent</span></tt> HTTP header in each request:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">Client</span><span class="p">(</span><span class="n">HTTP_USER_AGENT</span><span class="o">=</span><span class="s">'Mozilla/5.0'</span><span class="p">)</span>
</pre></div>
</div>
<p>The values from the <tt class="docutils literal"><span class="pre">extra</span></tt> keywords arguments passed to
<a class="reference internal" href="https://docs.djangoproject.com/en/1.8/topics/testing/tools/#django.test.Client.get" title="django.test.Client.get"><tt class="xref py py-meth docutils literal"><span class="pre">get()</span></tt></a>,
<a class="reference internal" href="https://docs.djangoproject.com/en/1.8/topics/testing/tools/#django.test.Client.post" title="django.test.Client.post"><tt class="xref py py-meth docutils literal"><span class="pre">post()</span></tt></a>, etc. have precedence over
the defaults passed to the class constructor.</p>
<p>The <tt class="docutils literal"><span class="pre">enforce_csrf_checks</span></tt> argument can be used to test CSRF
protection (see above).</p>
<p>Once you have a <tt class="docutils literal"><span class="pre">Client</span></tt> instance, you can call any of the following
methods:</p>
<dl class="method">
<dt id="django.test.Client.get">
<tt class="descname">get</tt>(<em>path</em>, <em>data=None</em>, <em>follow=False</em>, <em>secure=False</em>, <em>**extra</em>)<a class="headerlink" href="https://docs.djangoproject.com/en/1.8/topics/testing/tools/#django.test.Client.get" title="Permalink to this definition">¶</a></dt>
<dd><div class="versionadded">
<span class="title">New in Django 1.7:</span> <p>The <tt class="docutils literal"><span class="pre">secure</span></tt> argument was added.</p>
</div>
<p>Makes a GET request on the provided <tt class="docutils literal"><span class="pre">path</span></tt> and returns a <tt class="docutils literal"><span class="pre">Response</span></tt>
object, which is documented below.</p>
<p>The key-value pairs in the <tt class="docutils literal"><span class="pre">data</span></tt> dictionary are used to create a GET
data payload. For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">'/customers/details/'</span><span class="p">,</span> <span class="p">{</span><span class="s">'name'</span><span class="p">:</span> <span class="s">'fred'</span><span class="p">,</span> <span class="s">'age'</span><span class="p">:</span> <span class="mi">7</span><span class="p">})</span>
</pre></div>
</div>
<p>...will result in the evaluation of a GET request equivalent to:</p>
<div class="highlight-python"><div class="highlight"><pre>/customers/details/?name=fred&amp;age=7
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">extra</span></tt> keyword arguments parameter can be used to specify
headers to be sent in the request. For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">'/customers/details/'</span><span class="p">,</span> <span class="p">{</span><span class="s">'name'</span><span class="p">:</span> <span class="s">'fred'</span><span class="p">,</span> <span class="s">'age'</span><span class="p">:</span> <span class="mi">7</span><span class="p">},</span>
<span class="gp">... </span>      <span class="n">HTTP_X_REQUESTED_WITH</span><span class="o">=</span><span class="s">'XMLHttpRequest'</span><span class="p">)</span>
</pre></div>
</div>
<p>...will send the HTTP header <tt class="docutils literal"><span class="pre">HTTP_X_REQUESTED_WITH</span></tt> to the
details view, which is a good way to test code paths that use the
<a class="reference internal" href="https://docs.djangoproject.com/en/1.8/ref/request-response/#django.http.HttpRequest.is_ajax" title="django.http.HttpRequest.is_ajax"><tt class="xref py py-meth docutils literal"><span class="pre">django.http.HttpRequest.is_ajax()</span></tt></a> method.</p>
<div class="admonition-cgi-specification admonition">
<p class="first admonition-title">CGI specification</p>
<p class="last">The headers sent via <tt class="docutils literal"><span class="pre">**extra</span></tt> should follow <a class="reference external" href="http://www.w3.org/CGI/">CGI</a> specification.
For example, emulating a different “Host” header as sent in the
HTTP request from the browser to the server should be passed
as <tt class="docutils literal"><span class="pre">HTTP_HOST</span></tt>.</p>
</div>
<p>If you already have the GET arguments in URL-encoded form, you can
use that encoding instead of using the data argument. For example,
the previous GET request could also be posed as:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">'/customers/details/?name=fred&amp;age=7'</span><span class="p">)</span>
</pre></div>
</div>
<p>If you provide a URL with both an encoded GET data and a data argument,
the data argument will take precedence.</p>
<p>If you set <tt class="docutils literal"><span class="pre">follow</span></tt> to <tt class="docutils literal"><span class="pre">True</span></tt> the client will follow any redirects
and a <tt class="docutils literal"><span class="pre">redirect_chain</span></tt> attribute will be set in the response object
containing tuples of the intermediate urls and status codes.</p>
<p>If you had a URL <tt class="docutils literal"><span class="pre">/redirect_me/</span></tt> that redirected to <tt class="docutils literal"><span class="pre">/next/</span></tt>, that
redirected to <tt class="docutils literal"><span class="pre">/final/</span></tt>, this is what you’d see:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">response</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">'/redirect_me/'</span><span class="p">,</span> <span class="n">follow</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span><span class="o">.</span><span class="n">redirect_chain</span>
<span class="go">[('http://testserver/next/', 302), ('http://testserver/final/', 302)]</span>
</pre></div>
</div>
<p>If you set <tt class="docutils literal"><span class="pre">secure</span></tt> to <tt class="docutils literal"><span class="pre">True</span></tt> the client will emulate an HTTPS
request.</p>
</dd></dl>

<dl class="method">
<dt id="django.test.Client.post">
<tt class="descname">post</tt>(<em>path</em>, <em>data=None</em>, <em>content_type=MULTIPART_CONTENT</em>, <em>follow=False</em>, <em>secure=False</em>, <em>**extra</em>)<a class="headerlink" href="https://docs.djangoproject.com/en/1.8/topics/testing/tools/#django.test.Client.post" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes a POST request on the provided <tt class="docutils literal"><span class="pre">path</span></tt> and returns a
<tt class="docutils literal"><span class="pre">Response</span></tt> object, which is documented below.</p>
<p>The key-value pairs in the <tt class="docutils literal"><span class="pre">data</span></tt> dictionary are used to submit POST
data. For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s">'/login/'</span><span class="p">,</span> <span class="p">{</span><span class="s">'name'</span><span class="p">:</span> <span class="s">'fred'</span><span class="p">,</span> <span class="s">'passwd'</span><span class="p">:</span> <span class="s">'secret'</span><span class="p">})</span>
</pre></div>
</div>
<p>...will result in the evaluation of a POST request to this URL:</p>
<div class="highlight-python"><div class="highlight"><pre>/login/
</pre></div>
</div>
<p>...with this POST data:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">name</span><span class="o">=</span><span class="n">fred</span><span class="o">&amp;</span><span class="n">passwd</span><span class="o">=</span><span class="n">secret</span>
</pre></div>
</div>
<p>If you provide <tt class="docutils literal"><span class="pre">content_type</span></tt> (e.g. <em class="mimetype">text/xml</em> for an XML
payload), the contents of <tt class="docutils literal"><span class="pre">data</span></tt> will be sent as-is in the POST
request, using <tt class="docutils literal"><span class="pre">content_type</span></tt> in the HTTP <tt class="docutils literal"><span class="pre">Content-Type</span></tt> header.</p>
<p>If you don’t provide a value for <tt class="docutils literal"><span class="pre">content_type</span></tt>, the values in
<tt class="docutils literal"><span class="pre">data</span></tt> will be transmitted with a content type of
<em class="mimetype">multipart/form-data</em>. In this case, the key-value pairs in
<tt class="docutils literal"><span class="pre">data</span></tt> will be encoded as a multipart message and used to create the
POST data payload.</p>
<p>To submit multiple values for a given key – for example, to specify
the selections for a <tt class="docutils literal"><span class="pre">&lt;select</span> <span class="pre">multiple&gt;</span></tt> – provide the values as a
list or tuple for the required key. For example, this value of <tt class="docutils literal"><span class="pre">data</span></tt>
would submit three selected values for the field named <tt class="docutils literal"><span class="pre">choices</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">{</span><span class="s">'choices'</span><span class="p">:</span> <span class="p">(</span><span class="s">'a'</span><span class="p">,</span> <span class="s">'b'</span><span class="p">,</span> <span class="s">'d'</span><span class="p">)}</span>
</pre></div>
</div>
<p>Submitting files is a special case. To POST a file, you need only
provide the file field name as a key, and a file handle to the file you
wish to upload as a value. For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">'wishlist.doc'</span><span class="p">)</span> <span class="k">as</span> <span class="n">fp</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">c</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s">'/customers/wishes/'</span><span class="p">,</span> <span class="p">{</span><span class="s">'name'</span><span class="p">:</span> <span class="s">'fred'</span><span class="p">,</span> <span class="s">'attachment'</span><span class="p">:</span> <span class="n">fp</span><span class="p">})</span>
</pre></div>
</div>
<p>(The name <tt class="docutils literal"><span class="pre">attachment</span></tt> here is not relevant; use whatever name your
file-processing code expects.)</p>
<p>You may also provide any file-like object (e.g., <a class="reference external" href="https://docs.python.org/3/library/io.html#io.StringIO" title="(in Python v3.5)"><tt class="xref py py-class docutils literal"><span class="pre">StringIO</span></tt></a> or
<a class="reference external" href="https://docs.python.org/3/library/io.html#io.BytesIO" title="(in Python v3.5)"><tt class="xref py py-class docutils literal"><span class="pre">BytesIO</span></tt></a>) as a file handle.</p>
<div class="versionadded">
<span class="title">New in Django 1.8:</span> <p>The ability to use a file-like object was added.</p>
</div>
<p>Note that if you wish to use the same file handle for multiple
<tt class="docutils literal"><span class="pre">post()</span></tt> calls then you will need to manually reset the file
pointer between posts. The easiest way to do this is to
manually close the file after it has been provided to
<tt class="docutils literal"><span class="pre">post()</span></tt>, as demonstrated above.</p>
<p>You should also ensure that the file is opened in a way that
allows the data to be read. If your file contains binary data
such as an image, this means you will need to open the file in
<tt class="docutils literal"><span class="pre">rb</span></tt> (read binary) mode.</p>
<p>The <tt class="docutils literal"><span class="pre">extra</span></tt> argument acts the same as for <a class="reference internal" href="https://docs.djangoproject.com/en/1.8/topics/testing/tools/#django.test.Client.get" title="django.test.Client.get"><tt class="xref py py-meth docutils literal"><span class="pre">Client.get()</span></tt></a>.</p>
<p>If the URL you request with a POST contains encoded parameters, these
parameters will be made available in the request.GET data. For example,
if you were to make the request:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s">'/login/?visitor=true'</span><span class="p">,</span> <span class="p">{</span><span class="s">'name'</span><span class="p">:</span> <span class="s">'fred'</span><span class="p">,</span> <span class="s">'passwd'</span><span class="p">:</span> <span class="s">'secret'</span><span class="p">})</span>
</pre></div>
</div>
<p>... the view handling this request could interrogate request.POST
to retrieve the username and password, and could interrogate request.GET
to determine if the user was a visitor.</p>
<p>If you set <tt class="docutils literal"><span class="pre">follow</span></tt> to <tt class="docutils literal"><span class="pre">True</span></tt> the client will follow any redirects
and a <tt class="docutils literal"><span class="pre">redirect_chain</span></tt> attribute will be set in the response object
containing tuples of the intermediate urls and status codes.</p>
<p>If you set <tt class="docutils literal"><span class="pre">secure</span></tt> to <tt class="docutils literal"><span class="pre">True</span></tt> the client will emulate an HTTPS
request.</p>
</dd></dl>

<dl class="method">
<dt id="django.test.Client.head">
<tt class="descname">head</tt>(<em>path</em>, <em>data=None</em>, <em>follow=False</em>, <em>secure=False</em>, <em>**extra</em>)<a class="headerlink" href="https://docs.djangoproject.com/en/1.8/topics/testing/tools/#django.test.Client.head" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes a HEAD request on the provided <tt class="docutils literal"><span class="pre">path</span></tt> and returns a
<tt class="docutils literal"><span class="pre">Response</span></tt> object. This method works just like <a class="reference internal" href="https://docs.djangoproject.com/en/1.8/topics/testing/tools/#django.test.Client.get" title="django.test.Client.get"><tt class="xref py py-meth docutils literal"><span class="pre">Client.get()</span></tt></a>,
including the <tt class="docutils literal"><span class="pre">follow</span></tt>, <tt class="docutils literal"><span class="pre">secure</span></tt> and <tt class="docutils literal"><span class="pre">extra</span></tt> arguments, except
it does not return a message body.</p>
</dd></dl>

<dl class="method">
<dt id="django.test.Client.options">
<tt class="descname">options</tt>(<em>path</em>, <em>data=''</em>, <em>content_type='application/octet-stream'</em>, <em>follow=False</em>, <em>secure=False</em>, <em>**extra</em>)<a class="headerlink" href="https://docs.djangoproject.com/en/1.8/topics/testing/tools/#django.test.Client.options" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes an OPTIONS request on the provided <tt class="docutils literal"><span class="pre">path</span></tt> and returns a
<tt class="docutils literal"><span class="pre">Response</span></tt> object. Useful for testing RESTful interfaces.</p>
<p>When <tt class="docutils literal"><span class="pre">data</span></tt> is provided, it is used as the request body, and
a <tt class="docutils literal"><span class="pre">Content-Type</span></tt> header is set to <tt class="docutils literal"><span class="pre">content_type</span></tt>.</p>
<p>The <tt class="docutils literal"><span class="pre">follow</span></tt>, <tt class="docutils literal"><span class="pre">secure</span></tt> and <tt class="docutils literal"><span class="pre">extra</span></tt> arguments act the same as for
<a class="reference internal" href="https://docs.djangoproject.com/en/1.8/topics/testing/tools/#django.test.Client.get" title="django.test.Client.get"><tt class="xref py py-meth docutils literal"><span class="pre">Client.get()</span></tt></a>.</p>
</dd></dl>

<dl class="method">
<dt id="django.test.Client.put">
<tt class="descname">put</tt>(<em>path</em>, <em>data=''</em>, <em>content_type='application/octet-stream'</em>, <em>follow=False</em>, <em>secure=False</em>, <em>**extra</em>)<a class="headerlink" href="https://docs.djangoproject.com/en/1.8/topics/testing/tools/#django.test.Client.put" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes a PUT request on the provided <tt class="docutils literal"><span class="pre">path</span></tt> and returns a
<tt class="docutils literal"><span class="pre">Response</span></tt> object. Useful for testing RESTful interfaces.</p>
<p>When <tt class="docutils literal"><span class="pre">data</span></tt> is provided, it is used as the request body, and
a <tt class="docutils literal"><span class="pre">Content-Type</span></tt> header is set to <tt class="docutils literal"><span class="pre">content_type</span></tt>.</p>
<p>The <tt class="docutils literal"><span class="pre">follow</span></tt>, <tt class="docutils literal"><span class="pre">secure</span></tt> and <tt class="docutils literal"><span class="pre">extra</span></tt> arguments act the same as for
<a class="reference internal" href="https://docs.djangoproject.com/en/1.8/topics/testing/tools/#django.test.Client.get" title="django.test.Client.get"><tt class="xref py py-meth docutils literal"><span class="pre">Client.get()</span></tt></a>.</p>
</dd></dl>

<dl class="method">
<dt id="django.test.Client.patch">
<tt class="descname">patch</tt>(<em>path</em>, <em>data=''</em>, <em>content_type='application/octet-stream'</em>, <em>follow=False</em>, <em>secure=False</em>, <em>**extra</em>)<a class="headerlink" href="https://docs.djangoproject.com/en/1.8/topics/testing/tools/#django.test.Client.patch" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes a PATCH request on the provided <tt class="docutils literal"><span class="pre">path</span></tt> and returns a
<tt class="docutils literal"><span class="pre">Response</span></tt> object. Useful for testing RESTful interfaces.</p>
<p>The <tt class="docutils literal"><span class="pre">follow</span></tt>, <tt class="docutils literal"><span class="pre">secure</span></tt> and <tt class="docutils literal"><span class="pre">extra</span></tt> arguments act the same as for
<a class="reference internal" href="https://docs.djangoproject.com/en/1.8/topics/testing/tools/#django.test.Client.get" title="django.test.Client.get"><tt class="xref py py-meth docutils literal"><span class="pre">Client.get()</span></tt></a>.</p>
</dd></dl>

<dl class="method">
<dt id="django.test.Client.delete">
<tt class="descname">delete</tt>(<em>path</em>, <em>data=''</em>, <em>content_type='application/octet-stream'</em>, <em>follow=False</em>, <em>secure=False</em>, <em>**extra</em>)<a class="headerlink" href="https://docs.djangoproject.com/en/1.8/topics/testing/tools/#django.test.Client.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes an DELETE request on the provided <tt class="docutils literal"><span class="pre">path</span></tt> and returns a
<tt class="docutils literal"><span class="pre">Response</span></tt> object. Useful for testing RESTful interfaces.</p>
<p>When <tt class="docutils literal"><span class="pre">data</span></tt> is provided, it is used as the request body, and
a <tt class="docutils literal"><span class="pre">Content-Type</span></tt> header is set to <tt class="docutils literal"><span class="pre">content_type</span></tt>.</p>
<p>The <tt class="docutils literal"><span class="pre">follow</span></tt>, <tt class="docutils literal"><span class="pre">secure</span></tt> and <tt class="docutils literal"><span class="pre">extra</span></tt> arguments act the same as for
<a class="reference internal" href="https://docs.djangoproject.com/en/1.8/topics/testing/tools/#django.test.Client.get" title="django.test.Client.get"><tt class="xref py py-meth docutils literal"><span class="pre">Client.get()</span></tt></a>.</p>
</dd></dl>

<dl class="method">
<dt id="django.test.Client.trace">
<tt class="descname">trace</tt>(<em>path</em>, <em>follow=False</em>, <em>secure=False</em>, <em>**extra</em>)<a class="headerlink" href="https://docs.djangoproject.com/en/1.8/topics/testing/tools/#django.test.Client.trace" title="Permalink to this definition">¶</a></dt>
<dd><div class="versionadded">
<span class="title">New in Django 1.8.</span> </div>
<p>Makes a TRACE request on the provided <tt class="docutils literal"><span class="pre">path</span></tt> and returns a
<tt class="docutils literal"><span class="pre">Response</span></tt> object. Useful for simulating diagnostic probes.</p>
<p>Unlike the other request methods, <tt class="docutils literal"><span class="pre">data</span></tt> is not provided as a keyword
parameter in order to comply with <span class="target" id="index-0"></span><a class="rfc reference external" href="http://tools.ietf.org/html/rfc2616.html"><strong>RFC 2616</strong></a>, which mandates that
TRACE requests should not have an entity-body.</p>
<p>The <tt class="docutils literal"><span class="pre">follow</span></tt>, <tt class="docutils literal"><span class="pre">secure</span></tt>, and <tt class="docutils literal"><span class="pre">extra</span></tt> arguments act the same as for
<a class="reference internal" href="https://docs.djangoproject.com/en/1.8/topics/testing/tools/#django.test.Client.get" title="django.test.Client.get"><tt class="xref py py-meth docutils literal"><span class="pre">Client.get()</span></tt></a>.</p>
</dd></dl>

<dl class="method">
<dt id="django.test.Client.login">
<tt class="descname">login</tt>(<em>**credentials</em>)<a class="headerlink" href="https://docs.djangoproject.com/en/1.8/topics/testing/tools/#django.test.Client.login" title="Permalink to this definition">¶</a></dt>
<dd><p>If your site uses Django’s <a class="reference internal" href="https://docs.djangoproject.com/en/1.8/topics/auth/"><em>authentication system</em></a>
and you deal with logging in users, you can use the test client’s
<tt class="docutils literal"><span class="pre">login()</span></tt> method to simulate the effect of a user logging into the
site.</p>
<p>Inactive users (<a class="reference internal" href="https://docs.djangoproject.com/en/1.8/ref/contrib/auth/#django.contrib.auth.models.User.is_active" title="django.contrib.auth.models.User.is_active"><tt class="xref py py-attr docutils literal"><span class="pre">is_active=False</span></tt></a>) are not permitted to
login as this method is meant to be equivalent to the
<a class="reference internal" href="https://docs.djangoproject.com/en/1.8/topics/auth/default/#django.contrib.auth.login" title="django.contrib.auth.login"><tt class="xref py py-func docutils literal"><span class="pre">login()</span></tt></a> view which uses
<a class="reference internal" href="https://docs.djangoproject.com/en/1.8/topics/auth/default/#django.contrib.auth.forms.AuthenticationForm" title="django.contrib.auth.forms.AuthenticationForm"><tt class="xref py py-class docutils literal"><span class="pre">AuthenticationForm</span></tt></a> and therefore
defaults to rejecting users who are inactive.</p>
<p>After you call this method, the test client will have all the cookies
and session data required to pass any login-based tests that may form
part of a view.</p>
<p>The format of the <tt class="docutils literal"><span class="pre">credentials</span></tt> argument depends on which
<a class="reference internal" href="https://docs.djangoproject.com/en/1.8/topics/auth/customizing/#authentication-backends"><em>authentication backend</em></a> you’re using
(which is configured by your <a class="reference internal" href="https://docs.djangoproject.com/en/1.8/ref/settings/#std:setting-AUTHENTICATION_BACKENDS"><tt class="xref std std-setting docutils literal"><span class="pre">AUTHENTICATION_BACKENDS</span></tt></a>
setting). If you’re using the standard authentication backend provided
by Django (<tt class="docutils literal"><span class="pre">ModelBackend</span></tt>), <tt class="docutils literal"><span class="pre">credentials</span></tt> should be the user’s
username and password, provided as keyword arguments:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">login</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="s">'fred'</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s">'secret'</span><span class="p">)</span>

<span class="go"># Now you can access a view that's only available to logged-in users.</span>
</pre></div>
</div>
<p>If you’re using a different authentication backend, this method may
require different credentials. It requires whichever credentials are
required by your backend’s <tt class="docutils literal"><span class="pre">authenticate()</span></tt> method.</p>
<p><tt class="docutils literal"><span class="pre">login()</span></tt> returns <tt class="docutils literal"><span class="pre">True</span></tt> if it the credentials were accepted and
login was successful.</p>
<p>Finally, you’ll need to remember to create user accounts before you can
use this method. As we explained above, the test runner is executed
using a test database, which contains no users by default. As a result,
user accounts that are valid on your production site will not work
under test conditions. You’ll need to create users as part of the test
suite – either manually (using the Django model API) or with a test
fixture. Remember that if you want your test user to have a password,
you can’t set the user’s password by setting the password attribute
directly – you must use the
<a class="reference internal" href="https://docs.djangoproject.com/en/1.8/ref/contrib/auth/#django.contrib.auth.models.User.set_password" title="django.contrib.auth.models.User.set_password"><tt class="xref py py-meth docutils literal"><span class="pre">set_password()</span></tt></a> function to
store a correctly hashed password. Alternatively, you can use the
<a class="reference internal" href="https://docs.djangoproject.com/en/1.8/ref/contrib/auth/#django.contrib.auth.models.UserManager.create_user" title="django.contrib.auth.models.UserManager.create_user"><tt class="xref py py-meth docutils literal"><span class="pre">create_user()</span></tt></a> helper
method to create a new user with a correctly hashed password.</p>
</dd></dl>

<dl class="method">
<dt id="django.test.Client.logout">
<tt class="descname">logout</tt>()<a class="headerlink" href="https://docs.djangoproject.com/en/1.8/topics/testing/tools/#django.test.Client.logout" title="Permalink to this definition">¶</a></dt>
<dd><p>If your site uses Django’s <a class="reference internal" href="https://docs.djangoproject.com/en/1.8/topics/auth/"><em>authentication system</em></a>,
the <tt class="docutils literal"><span class="pre">logout()</span></tt> method can be used to simulate the effect of a user
logging out of your site.</p>
<p>After you call this method, the test client will have all the cookies
and session data cleared to defaults. Subsequent requests will appear
to come from an <a class="reference internal" href="https://docs.djangoproject.com/en/1.8/ref/contrib/auth/#django.contrib.auth.models.AnonymousUser" title="django.contrib.auth.models.AnonymousUser"><tt class="xref py py-class docutils literal"><span class="pre">AnonymousUser</span></tt></a>.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="s-testing-responses">
<span id="testing-responses"></span><h3>Testing responses<a class="headerlink" href="https://docs.djangoproject.com/en/1.8/topics/testing/tools/#testing-responses" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">get()</span></tt> and <tt class="docutils literal"><span class="pre">post()</span></tt> methods both return a <tt class="docutils literal"><span class="pre">Response</span></tt> object. This
<tt class="docutils literal"><span class="pre">Response</span></tt> object is <em>not</em> the same as the <tt class="docutils literal"><span class="pre">HttpResponse</span></tt> object returned
by Django views; the test response object has some additional data useful for
test code to verify.</p>
<p>Specifically, a <tt class="docutils literal"><span class="pre">Response</span></tt> object has the following attributes:</p>
<dl class="class">
<dt id="django.test.Response">
<em class="property">class </em><tt class="descname">Response</tt><a class="headerlink" href="https://docs.djangoproject.com/en/1.8/topics/testing/tools/#django.test.Response" title="Permalink to this definition">¶</a></dt>
<dd><dl class="attribute">
<dt id="django.test.Response.client">
<tt class="descname">client</tt><a class="headerlink" href="https://docs.djangoproject.com/en/1.8/topics/testing/tools/#django.test.Response.client" title="Permalink to this definition">¶</a></dt>
<dd><p>The test client that was used to make the request that resulted in the
response.</p>
</dd></dl>

<dl class="attribute">
<dt id="django.test.Response.content">
<tt class="descname">content</tt><a class="headerlink" href="https://docs.djangoproject.com/en/1.8/topics/testing/tools/#django.test.Response.content" title="Permalink to this definition">¶</a></dt>
<dd><p>The body of the response, as a bytestring. This is the final page
content as rendered by the view, or any error message.</p>
</dd></dl>

<dl class="attribute">
<dt id="django.test.Response.context">
<tt class="descname">context</tt><a class="headerlink" href="https://docs.djangoproject.com/en/1.8/topics/testing/tools/#django.test.Response.context" title="Permalink to this definition">¶</a></dt>
<dd><p>The template <tt class="docutils literal"><span class="pre">Context</span></tt> instance that was used to render the template that
produced the response content.</p>
<p>If the rendered page used multiple templates, then <tt class="docutils literal"><span class="pre">context</span></tt> will be a
list of <tt class="docutils literal"><span class="pre">Context</span></tt> objects, in the order in which they were rendered.</p>
<p>Regardless of the number of templates used during rendering, you can
retrieve context values using the <tt class="docutils literal"><span class="pre">[]</span></tt> operator. For example, the
context variable <tt class="docutils literal"><span class="pre">name</span></tt> could be retrieved using:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">'/foo/'</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span><span class="o">.</span><span class="n">context</span><span class="p">[</span><span class="s">'name'</span><span class="p">]</span>
<span class="go">'Arthur'</span>
</pre></div>
</div>
<div class="admonition-not-using-django-templates admonition">
<p class="first admonition-title">Not using Django templates?</p>
<p class="last">This attribute is only populated when using the
<a class="reference internal" href="https://docs.djangoproject.com/en/1.8/topics/templates/#django.template.backends.django.DjangoTemplates" title="django.template.backends.django.DjangoTemplates"><tt class="xref py py-class docutils literal"><span class="pre">DjangoTemplates</span></tt></a> backend.
If you’re using another template engine,
<a class="reference internal" href="https://docs.djangoproject.com/en/1.8/ref/template-response/#django.template.response.SimpleTemplateResponse.context_data" title="django.template.response.SimpleTemplateResponse.context_data"><tt class="xref py py-attr docutils literal"><span class="pre">context_data</span></tt></a>
may be a suitable alternative on responses with that attribute.</p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="django.test.Response.request">
<tt class="descname">request</tt><a class="headerlink" href="https://docs.djangoproject.com/en/1.8/topics/testing/tools/#django.test.Response.request" title="Permalink to this definition">¶</a></dt>
<dd><p>The request data that stimulated the response.</p>
</dd></dl>

<dl class="attribute">
<dt id="django.test.Response.wsgi_request">
<tt class="descname">wsgi_request</tt><a class="headerlink" href="https://docs.djangoproject.com/en/1.8/topics/testing/tools/#django.test.Response.wsgi_request" title="Permalink to this definition">¶</a></dt>
<dd><div class="versionadded">
<span class="title">New in Django 1.7.</span> </div>
<p>The <tt class="docutils literal"><span class="pre">WSGIRequest</span></tt> instance generated by the test handler that
generated the response.</p>
</dd></dl>

<dl class="attribute">
<dt id="django.test.Response.status_code">
<tt class="descname">status_code</tt><a class="headerlink" href="https://docs.djangoproject.com/en/1.8/topics/testing/tools/#django.test.Response.status_code" title="Permalink to this definition">¶</a></dt>
<dd><p>The HTTP status of the response, as an integer. See
<span class="target" id="index-1"></span><a class="rfc reference external" href="http://tools.ietf.org/html/rfc2616.html#section-10"><strong>RFC 2616</strong></a> for a full list of HTTP status codes.</p>
</dd></dl>

<dl class="attribute">
<dt id="django.test.Response.templates">
<tt class="descname">templates</tt><a class="headerlink" href="https://docs.djangoproject.com/en/1.8/topics/testing/tools/#django.test.Response.templates" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of <tt class="docutils literal"><span class="pre">Template</span></tt> instances used to render the final content, in
the order they were rendered. For each template in the list, use
<tt class="docutils literal"><span class="pre">template.name</span></tt> to get the template’s file name, if the template was
loaded from a file. (The name is a string such as
<tt class="docutils literal"><span class="pre">'admin/index.html'</span></tt>.)</p>
<div class="admonition-not-using-django-templates admonition">
<p class="first admonition-title">Not using Django templates?</p>
<p class="last">This attribute is only populated when using the
<a class="reference internal" href="https://docs.djangoproject.com/en/1.8/topics/templates/#django.template.backends.django.DjangoTemplates" title="django.template.backends.django.DjangoTemplates"><tt class="xref py py-class docutils literal"><span class="pre">DjangoTemplates</span></tt></a> backend.
If you’re using another template engine,
<a class="reference internal" href="https://docs.djangoproject.com/en/1.8/ref/template-response/#django.template.response.SimpleTemplateResponse.template_name" title="django.template.response.SimpleTemplateResponse.template_name"><tt class="xref py py-attr docutils literal"><span class="pre">template_name</span></tt></a>
may be a suitable alternative if you only need the name of the
template used for rendering.</p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="django.test.Response.resolver_match">
<tt class="descname">resolver_match</tt><a class="headerlink" href="https://docs.djangoproject.com/en/1.8/topics/testing/tools/#django.test.Response.resolver_match" title="Permalink to this definition">¶</a></dt>
<dd><div class="versionadded">
<span class="title">New in Django 1.8:</span> <p>An instance of <a class="reference internal" href="https://docs.djangoproject.com/en/1.8/ref/urlresolvers/#django.core.urlresolvers.ResolverMatch" title="django.core.urlresolvers.ResolverMatch"><tt class="xref py py-class docutils literal"><span class="pre">ResolverMatch</span></tt></a> for the
response. You can use the
<a class="reference internal" href="https://docs.djangoproject.com/en/1.8/ref/urlresolvers/#django.core.urlresolvers.ResolverMatch.func" title="django.core.urlresolvers.ResolverMatch.func"><tt class="xref py py-attr docutils literal"><span class="pre">func</span></tt></a> attribute, for
example, to verify the view that served the response:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># my_view here is a function based view</span>
<span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">resolver_match</span><span class="o">.</span><span class="n">func</span><span class="p">,</span> <span class="n">my_view</span><span class="p">)</span>

<span class="c"># class-based views need to be compared by name, as the functions</span>
<span class="c"># generated by as_view() won't be equal</span>
<span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">resolver_match</span><span class="o">.</span><span class="n">func</span><span class="o">.</span><span class="n">__name__</span><span class="p">,</span> <span class="n">MyView</span><span class="o">.</span><span class="n">as_view</span><span class="p">()</span><span class="o">.</span><span class="n">__name__</span><span class="p">)</span>
</pre></div>
</div>
<p>If the given URL is not found, accessing this attribute will raise a
<a class="reference internal" href="https://docs.djangoproject.com/en/1.8/ref/exceptions/#django.core.urlresolvers.Resolver404" title="django.core.urlresolvers.Resolver404"><tt class="xref py py-exc docutils literal"><span class="pre">Resolver404</span></tt></a> exception.</p>
</div>
</dd></dl>

</dd></dl>

<p>You can also use dictionary syntax on the response object to query the value
of any settings in the HTTP headers. For example, you could determine the
content type of a response using <tt class="docutils literal"><span class="pre">response['Content-Type']</span></tt>.</p>
</div>
<div class="section" id="s-exceptions">
<span id="exceptions"></span><h3>Exceptions<a class="headerlink" href="https://docs.djangoproject.com/en/1.8/topics/testing/tools/#exceptions" title="Permalink to this headline">¶</a></h3>
<p>If you point the test client at a view that raises an exception, that exception
will be visible in the test case. You can then use a standard <tt class="docutils literal"><span class="pre">try</span> <span class="pre">...</span> <span class="pre">except</span></tt>
block or <a class="reference external" href="https://docs.python.org/3/library/unittest.html#unittest.TestCase.assertRaises" title="(in Python v3.5)"><tt class="xref py py-meth docutils literal"><span class="pre">assertRaises()</span></tt></a> to test for exceptions.</p>
<p>The only exceptions that are not visible to the test client are
<a class="reference internal" href="https://docs.djangoproject.com/en/1.8/topics/http/views/#django.http.Http404" title="django.http.Http404"><tt class="xref py py-class docutils literal"><span class="pre">Http404</span></tt></a>,
<a class="reference internal" href="https://docs.djangoproject.com/en/1.8/ref/exceptions/#django.core.exceptions.PermissionDenied" title="django.core.exceptions.PermissionDenied"><tt class="xref py py-class docutils literal"><span class="pre">PermissionDenied</span></tt></a>, <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#SystemExit" title="(in Python v3.5)"><tt class="xref py py-exc docutils literal"><span class="pre">SystemExit</span></tt></a>, and
<a class="reference internal" href="https://docs.djangoproject.com/en/1.8/ref/exceptions/#django.core.exceptions.SuspiciousOperation" title="django.core.exceptions.SuspiciousOperation"><tt class="xref py py-class docutils literal"><span class="pre">SuspiciousOperation</span></tt></a>. Django catches these
exceptions internally and converts them into the appropriate HTTP response
codes. In these cases, you can check <tt class="docutils literal"><span class="pre">response.status_code</span></tt> in your test.</p>
</div>
<div class="section" id="s-persistent-state">
<span id="persistent-state"></span><h3>Persistent state<a class="headerlink" href="https://docs.djangoproject.com/en/1.8/topics/testing/tools/#persistent-state" title="Permalink to this headline">¶</a></h3>
<p>The test client is stateful. If a response returns a cookie, then that cookie
will be stored in the test client and sent with all subsequent <tt class="docutils literal"><span class="pre">get()</span></tt> and
<tt class="docutils literal"><span class="pre">post()</span></tt> requests.</p>
<p>Expiration policies for these cookies are not followed. If you want a cookie
to expire, either delete it manually or create a new <tt class="docutils literal"><span class="pre">Client</span></tt> instance (which
will effectively delete all cookies).</p>
<p>A test client has two attributes that store persistent state information. You
can access these properties as part of a test condition.</p>
<dl class="attribute">
<dt id="django.test.Client.cookies">
<tt class="descclassname">Client.</tt><tt class="descname">cookies</tt><a class="headerlink" href="https://docs.djangoproject.com/en/1.8/topics/testing/tools/#django.test.Client.cookies" title="Permalink to this definition">¶</a></dt>
<dd><p>A Python <a class="reference external" href="https://docs.python.org/3/library/http.cookies.html#http.cookies.SimpleCookie" title="(in Python v3.5)"><tt class="xref py py-class docutils literal"><span class="pre">SimpleCookie</span></tt></a> object, containing the current
values of all the client cookies. See the documentation of the
<a class="reference external" href="https://docs.python.org/3/library/http.cookies.html#module-http.cookies" title="(in Python v3.5)"><tt class="xref py py-mod docutils literal"><span class="pre">http.cookies</span></tt></a> module for more.</p>
</dd></dl>

<dl class="attribute">
<dt id="django.test.Client.session">
<tt class="descclassname">Client.</tt><tt class="descname">session</tt><a class="headerlink" href="https://docs.djangoproject.com/en/1.8/topics/testing/tools/#django.test.Client.session" title="Permalink to this definition">¶</a></dt>
<dd><p>A dictionary-like object containing session information. See the
<a class="reference internal" href="https://docs.djangoproject.com/en/1.8/topics/http/sessions/"><em>session documentation</em></a> for full details.</p>
<p>To modify the session and then save it, it must be stored in a variable
first (because a new <tt class="docutils literal"><span class="pre">SessionStore</span></tt> is created every time this property
is accessed):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">test_something</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">session</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">session</span>
    <span class="n">session</span><span class="p">[</span><span class="s">'somekey'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'test'</span>
    <span class="n">session</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="s-example">
<span id="example"></span><h3>Example<a class="headerlink" href="https://docs.djangoproject.com/en/1.8/topics/testing/tools/#example" title="Permalink to this headline">¶</a></h3>
<p>The following is a simple unit test using the test client:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">unittest</span>
<span class="kn">from</span> <span class="nn">django.test</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="k">class</span> <span class="nc">SimpleTest</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Every test needs a client.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">test_details</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Issue a GET request.</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">'/customer/details/'</span><span class="p">)</span>

        <span class="c"># Check that the response is 200 OK.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span>

        <span class="c"># Check that the rendered context contains 5 customers.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">context</span><span class="p">[</span><span class="s">'customers'</span><span class="p">]),</span> <span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="https://docs.djangoproject.com/en/1.8/topics/testing/advanced/#django.test.RequestFactory" title="django.test.RequestFactory"><tt class="xref py py-class docutils literal"><span class="pre">django.test.RequestFactory</span></tt></a></p>
</div>
</div>
</div>
<div class="section" id="s-provided-test-case-classes">
<span id="s-django-testcase-subclasses"></span><span id="provided-test-case-classes"></span><span id="django-testcase-subclasses"></span><h2>Provided test case classes<a class="headerlink" href="https://docs.djangoproject.com/en/1.8/topics/testing/tools/#provided-test-case-classes" title="Permalink to this headline">¶</a></h2>
<p>Normal Python unit test classes extend a base class of
<a class="reference external" href="https://docs.python.org/3/library/unittest.html#unittest.TestCase" title="(in Python v3.5)"><tt class="xref py py-class docutils literal"><span class="pre">unittest.TestCase</span></tt></a>. Django provides a few extensions of this base class:</p>
<div class="figure" id="testcase-hierarchy-diagram">
<a class="reference internal image-reference" href="./Testing tools _ Django documentation _ Django_files/django_unittest_classes_hierarchy.svg"><img alt="Hierarchy of Django unit testing classes (TestCase subclasses)" height="328" src="./Testing tools _ Django documentation _ Django_files/django_unittest_classes_hierarchy.svg" width="508"></a>
<p class="caption">Hierarchy of Django unit testing classes</p>
</div>
<div class="section" id="s-simpletestcase">
<span id="simpletestcase"></span><h3>SimpleTestCase<a class="headerlink" href="https://docs.djangoproject.com/en/1.8/topics/testing/tools/#simpletestcase" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.test.SimpleTestCase">
<em class="property">class </em><tt class="descname">SimpleTestCase</tt><a class="headerlink" href="https://docs.djangoproject.com/en/1.8/topics/testing/tools/#django.test.SimpleTestCase" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>A thin subclass of <a class="reference external" href="https://docs.python.org/3/library/unittest.html#unittest.TestCase" title="(in Python v3.5)"><tt class="xref py py-class docutils literal"><span class="pre">unittest.TestCase</span></tt></a>, it extends it with some basic
functionality like:</p>
<ul class="simple">
<li>Saving and restoring the Python warning machinery state.</li>
<li>Some useful assertions like:<ul>
<li>Checking that a callable <a class="reference internal" href="https://docs.djangoproject.com/en/1.8/topics/testing/tools/#django.test.SimpleTestCase.assertRaisesMessage" title="django.test.SimpleTestCase.assertRaisesMessage"><tt class="xref py py-meth docutils literal"><span class="pre">raises</span> <span class="pre">a</span> <span class="pre">certain</span> <span class="pre">exception</span></tt></a>.</li>
<li>Testing form field <a class="reference internal" href="https://docs.djangoproject.com/en/1.8/topics/testing/tools/#django.test.SimpleTestCase.assertFieldOutput" title="django.test.SimpleTestCase.assertFieldOutput"><tt class="xref py py-meth docutils literal"><span class="pre">rendering</span> <span class="pre">and</span> <span class="pre">error</span> <span class="pre">treatment</span></tt></a>.</li>
<li>Testing <a class="reference internal" href="https://docs.djangoproject.com/en/1.8/topics/testing/tools/#django.test.SimpleTestCase.assertContains" title="django.test.SimpleTestCase.assertContains"><tt class="xref py py-meth docutils literal"><span class="pre">HTML</span> <span class="pre">responses</span> <span class="pre">for</span> <span class="pre">the</span> <span class="pre">presence/lack</span> <span class="pre">of</span> <span class="pre">a</span> <span class="pre">given</span> <span class="pre">fragment</span></tt></a>.</li>
<li>Verifying that a template <a class="reference internal" href="https://docs.djangoproject.com/en/1.8/topics/testing/tools/#django.test.SimpleTestCase.assertTemplateUsed" title="django.test.SimpleTestCase.assertTemplateUsed"><tt class="xref py py-meth docutils literal"><span class="pre">has/hasn't</span> <span class="pre">been</span> <span class="pre">used</span> <span class="pre">to</span> <span class="pre">generate</span> <span class="pre">a</span> <span class="pre">given</span>
<span class="pre">response</span> <span class="pre">content</span></tt></a>.</li>
<li>Verifying a HTTP <a class="reference internal" href="https://docs.djangoproject.com/en/1.8/topics/testing/tools/#django.test.SimpleTestCase.assertRedirects" title="django.test.SimpleTestCase.assertRedirects"><tt class="xref py py-meth docutils literal"><span class="pre">redirect</span></tt></a> is
performed by the app.</li>
<li>Robustly testing two <a class="reference internal" href="https://docs.djangoproject.com/en/1.8/topics/testing/tools/#django.test.SimpleTestCase.assertHTMLEqual" title="django.test.SimpleTestCase.assertHTMLEqual"><tt class="xref py py-meth docutils literal"><span class="pre">HTML</span> <span class="pre">fragments</span></tt></a>
for equality/inequality or <a class="reference internal" href="https://docs.djangoproject.com/en/1.8/topics/testing/tools/#django.test.SimpleTestCase.assertInHTML" title="django.test.SimpleTestCase.assertInHTML"><tt class="xref py py-meth docutils literal"><span class="pre">containment</span></tt></a>.</li>
<li>Robustly testing two <a class="reference internal" href="https://docs.djangoproject.com/en/1.8/topics/testing/tools/#django.test.SimpleTestCase.assertXMLEqual" title="django.test.SimpleTestCase.assertXMLEqual"><tt class="xref py py-meth docutils literal"><span class="pre">XML</span> <span class="pre">fragments</span></tt></a>
for equality/inequality.</li>
<li>Robustly testing two <a class="reference internal" href="https://docs.djangoproject.com/en/1.8/topics/testing/tools/#django.test.SimpleTestCase.assertJSONEqual" title="django.test.SimpleTestCase.assertJSONEqual"><tt class="xref py py-meth docutils literal"><span class="pre">JSON</span> <span class="pre">fragments</span></tt></a>
for equality.</li>
</ul>
</li>
<li>The ability to run tests with <a class="reference internal" href="https://docs.djangoproject.com/en/1.8/topics/testing/tools/#overriding-settings"><em>modified settings</em></a>.</li>
<li>Using the <a class="reference internal" href="https://docs.djangoproject.com/en/1.8/topics/testing/tools/#django.test.SimpleTestCase.client" title="django.test.SimpleTestCase.client"><tt class="xref py py-attr docutils literal"><span class="pre">client</span></tt></a> <a class="reference internal" href="https://docs.djangoproject.com/en/1.8/topics/testing/tools/#django.test.Client" title="django.test.Client"><tt class="xref py py-class docutils literal"><span class="pre">Client</span></tt></a>.</li>
<li>Custom test-time <a class="reference internal" href="https://docs.djangoproject.com/en/1.8/topics/testing/tools/#django.test.SimpleTestCase.urls" title="django.test.SimpleTestCase.urls"><tt class="xref py py-attr docutils literal"><span class="pre">URL</span> <span class="pre">maps</span></tt></a>.</li>
</ul>
<p>If you need any of the other more complex and heavyweight Django-specific
features like:</p>
<ul class="simple">
<li>Testing or using the ORM.</li>
<li>Database <a class="reference internal" href="https://docs.djangoproject.com/en/1.8/topics/testing/tools/#django.test.TransactionTestCase.fixtures" title="django.test.TransactionTestCase.fixtures"><tt class="xref py py-attr docutils literal"><span class="pre">fixtures</span></tt></a>.</li>
<li>Test <a class="reference internal" href="https://docs.djangoproject.com/en/1.8/topics/testing/tools/#skipping-tests"><em>skipping based on database backend features</em></a>.</li>
<li>The remaining specialized <a class="reference internal" href="https://docs.djangoproject.com/en/1.8/topics/testing/tools/#django.test.TransactionTestCase.assertQuerysetEqual" title="django.test.TransactionTestCase.assertQuerysetEqual"><tt class="xref py py-meth docutils literal"><span class="pre">assert*</span></tt></a> methods.</li>
</ul>
<p>then you should use <a class="reference internal" href="https://docs.djangoproject.com/en/1.8/topics/testing/tools/#django.test.TransactionTestCase" title="django.test.TransactionTestCase"><tt class="xref py py-class docutils literal"><span class="pre">TransactionTestCase</span></tt></a> or
<a class="reference internal" href="https://docs.djangoproject.com/en/1.8/topics/testing/tools/#django.test.TestCase" title="django.test.TestCase"><tt class="xref py py-class docutils literal"><span class="pre">TestCase</span></tt></a> instead.</p>
<p><tt class="docutils literal"><span class="pre">SimpleTestCase</span></tt> inherits from <tt class="docutils literal"><span class="pre">unittest.TestCase</span></tt>.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p><tt class="docutils literal"><span class="pre">SimpleTestCase</span></tt> and its subclasses (e.g. <tt class="docutils literal"><span class="pre">TestCase</span></tt>, ...) rely on
<tt class="docutils literal"><span class="pre">setUpClass()</span></tt> and <tt class="docutils literal"><span class="pre">tearDownClass()</span></tt> to perform some class-wide
initialization (e.g. overriding settings). If you need to override those
methods, don’t forget to call the <tt class="docutils literal"><span class="pre">super</span></tt> implementation:</p>
<div class="last highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">MyTestCase</span><span class="p">(</span><span class="n">TestCase</span><span class="p">):</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">setUpClass</span><span class="p">(</span><span class="n">cls</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">MyTestCase</span><span class="p">,</span> <span class="n">cls</span><span class="p">)</span><span class="o">.</span><span class="n">setUpClass</span><span class="p">()</span>     <span class="c"># Call parent first</span>
        <span class="o">...</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">tearDownClass</span><span class="p">(</span><span class="n">cls</span><span class="p">):</span>
        <span class="o">...</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">MyTestCase</span><span class="p">,</span> <span class="n">cls</span><span class="p">)</span><span class="o">.</span><span class="n">tearDownClass</span><span class="p">()</span>  <span class="c"># Call parent last</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="s-transactiontestcase">
<span id="transactiontestcase"></span><h3>TransactionTestCase<a class="headerlink" href="https://docs.djangoproject.com/en/1.8/topics/testing/tools/#transactiontestcase" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.test.TransactionTestCase">
<em class="property">class </em><tt class="descname">TransactionTestCase</tt><a class="headerlink" href="https://docs.djangoproject.com/en/1.8/topics/testing/tools/#django.test.TransactionTestCase" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Django’s <tt class="docutils literal"><span class="pre">TestCase</span></tt> class (described below) makes use of database transaction
facilities to speed up the process of resetting the database to a known state
at the beginning of each test. A consequence of this, however, is that some
database behaviors cannot be tested within a Django <tt class="docutils literal"><span class="pre">TestCase</span></tt> class. For
instance, you cannot test that a block of code is executing within a
transaction, as is required when using
<a class="reference internal" href="https://docs.djangoproject.com/en/1.8/ref/models/querysets/#django.db.models.query.QuerySet.select_for_update" title="django.db.models.query.QuerySet.select_for_update"><tt class="xref py py-meth docutils literal"><span class="pre">select_for_update()</span></tt></a>. In those cases,
you should use <tt class="docutils literal"><span class="pre">TransactionTestCase</span></tt>.</p>
<div class="versionchanged">
<span class="title">Changed in Django 1.8:</span> <p>In older versions of Django, the effects of transaction commit and rollback
could not be tested within a <tt class="docutils literal"><span class="pre">TestCase</span></tt>.  With the completion of the
deprecation cycle of the old-style transaction management in Django 1.8,
transaction management commands (e.g. <tt class="docutils literal"><span class="pre">transaction.commit()</span></tt>) are no
longer disabled within <tt class="docutils literal"><span class="pre">TestCase</span></tt>.</p>
</div>
<p><tt class="docutils literal"><span class="pre">TransactionTestCase</span></tt> and <tt class="docutils literal"><span class="pre">TestCase</span></tt> are identical except for the manner
in which the database is reset to a known state and the ability for test code
to test the effects of commit and rollback:</p>
<ul class="simple">
<li>A <tt class="docutils literal"><span class="pre">TransactionTestCase</span></tt> resets the database after the test runs by
truncating all tables. A <tt class="docutils literal"><span class="pre">TransactionTestCase</span></tt> may call commit and rollback
and observe the effects of these calls on the database.</li>
<li>A <tt class="docutils literal"><span class="pre">TestCase</span></tt>, on the other hand, does not truncate tables after a test.
Instead, it encloses the test code in a database transaction that is rolled
back at the end of the test. This guarantees that the rollback at the end of
the test restores the database to its initial state.</li>
</ul>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p><tt class="docutils literal"><span class="pre">TestCase</span></tt> running on a database that does not support rollback (e.g. MySQL with the
MyISAM storage engine), and all instances of <tt class="docutils literal"><span class="pre">TransactionTestCase</span></tt>, will
roll back at the end of the test by deleting all data from the test database
and reloading initial data for apps without migrations.</p>
<p class="last">Apps with migrations <a class="reference internal" href="https://docs.djangoproject.com/en/1.8/topics/testing/overview/#test-case-serialized-rollback"><em>will not see their data reloaded</em></a>;
if you need this functionality (for example, third-party apps should enable
this) you can set <tt class="docutils literal"><span class="pre">serialized_rollback</span> <span class="pre">=</span> <span class="pre">True</span></tt> inside the
<tt class="docutils literal"><span class="pre">TestCase</span></tt> body.</p>
</div>
<p><tt class="docutils literal"><span class="pre">TransactionTestCase</span></tt> inherits from <a class="reference internal" href="https://docs.djangoproject.com/en/1.8/topics/testing/tools/#django.test.SimpleTestCase" title="django.test.SimpleTestCase"><tt class="xref py py-class docutils literal"><span class="pre">SimpleTestCase</span></tt></a>.</p>
</div>
<div class="section" id="s-testcase">
<span id="testcase"></span><h3>TestCase<a class="headerlink" href="https://docs.djangoproject.com/en/1.8/topics/testing/tools/#testcase" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.test.TestCase">
<em class="property">class </em><tt class="descname">TestCase</tt><a class="headerlink" href="https://docs.djangoproject.com/en/1.8/topics/testing/tools/#django.test.TestCase" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>This class provides some additional capabilities that can be useful for testing
Web sites.</p>
<p>Converting a normal <a class="reference external" href="https://docs.python.org/3/library/unittest.html#unittest.TestCase" title="(in Python v3.5)"><tt class="xref py py-class docutils literal"><span class="pre">unittest.TestCase</span></tt></a> to a Django <a class="reference internal" href="https://docs.djangoproject.com/en/1.8/topics/testing/tools/#django.test.TestCase" title="django.test.TestCase"><tt class="xref py py-class docutils literal"><span class="pre">TestCase</span></tt></a> is
easy: Just change the base class of your test from <tt class="docutils literal"><span class="pre">'unittest.TestCase'</span></tt> to
<tt class="docutils literal"><span class="pre">'django.test.TestCase'</span></tt>. All of the standard Python unit test functionality
will continue to be available, but it will be augmented with some useful
additions, including:</p>
<ul class="simple">
<li>Automatic loading of fixtures.</li>
<li>Wraps the tests within two nested <tt class="docutils literal"><span class="pre">atomic</span></tt> blocks: one for the whole class
and one for each test.</li>
<li>Creates a TestClient instance.</li>
<li>Django-specific assertions for testing for things like redirection and form
errors.</li>
</ul>
<dl class="classmethod">
<dt id="django.test.TestCase.setUpTestData">
<em class="property">classmethod </em><tt class="descclassname">TestCase.</tt><tt class="descname">setUpTestData</tt>()<a class="headerlink" href="https://docs.djangoproject.com/en/1.8/topics/testing/tools/#django.test.TestCase.setUpTestData" title="Permalink to this definition">¶</a></dt>
<dd><div class="versionadded">
<span class="title">New in Django 1.8.</span> </div>
<p>The class-level <tt class="docutils literal"><span class="pre">atomic</span></tt> block described above allows the creation of
initial data at the class level, once for the whole <tt class="docutils literal"><span class="pre">TestCase</span></tt>. This
technique allows for faster tests as compared to using <tt class="docutils literal"><span class="pre">setUp()</span></tt>.</p>
<p>For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.test</span> <span class="kn">import</span> <span class="n">TestCase</span>

<span class="k">class</span> <span class="nc">MyTests</span><span class="p">(</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">setUpTestData</span><span class="p">(</span><span class="n">cls</span><span class="p">):</span>
        <span class="c"># Set up data for the whole TestCase</span>
        <span class="n">cls</span><span class="o">.</span><span class="n">foo</span> <span class="o">=</span> <span class="n">Foo</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">bar</span><span class="o">=</span><span class="s">"Test"</span><span class="p">)</span>
        <span class="o">...</span>

    <span class="k">def</span> <span class="nf">test1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Some test using self.foo</span>
        <span class="o">...</span>

    <span class="k">def</span> <span class="nf">test2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c"># Some other test using self.foo</span>
        <span class="o">...</span>
</pre></div>
</div>
<p>Note that if the tests are run on a database with no transaction support
(for instance, MySQL with the MyISAM engine), <tt class="docutils literal"><span class="pre">setUpTestData()</span></tt> will be
called before each test, negating the speed benefits.</p>
<p>Be careful not to modify any objects created in <tt class="docutils literal"><span class="pre">setUpTestData()</span></tt> in
your test methods. Modifications to in-memory objects from setup work done
at the class level will persist between test methods. If you do need to
modify them, you could reload them in the <tt class="docutils literal"><span class="pre">setUp()</span></tt> method with
<a class="reference internal" href="https://docs.djangoproject.com/en/1.8/ref/models/instances/#django.db.models.Model.refresh_from_db" title="django.db.models.Model.refresh_from_db"><tt class="xref py py-meth docutils literal"><span class="pre">refresh_from_db()</span></tt></a>, for example.</p>
</dd></dl>

<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">If you want to test some specific database transaction behavior, you should
use <tt class="docutils literal"><span class="pre">TransactionTestCase</span></tt>, as <tt class="docutils literal"><span class="pre">TestCase</span></tt> wraps test execution within an
<a class="reference internal" href="https://docs.djangoproject.com/en/1.8/topics/db/transactions/#django.db.transaction.atomic" title="django.db.transaction.atomic"><tt class="xref py py-func docutils literal"><span class="pre">atomic()</span></tt></a> block.</p>
</div>
<p><tt class="docutils literal"><span class="pre">TestCase</span></tt> inherits from <a class="reference internal" href="https://docs.djangoproject.com/en/1.8/topics/testing/tools/#django.test.TransactionTestCase" title="django.test.TransactionTestCase"><tt class="xref py py-class docutils literal"><span class="pre">TransactionTestCase</span></tt></a>.</p>
</div>
<div class="section" id="s-liveservertestcase">
<span id="s-live-test-server"></span><span id="liveservertestcase"></span><span id="live-test-server"></span><h3>LiveServerTestCase<a class="headerlink" href="https://docs.djangoproject.com/en/1.8/topics/testing/tools/#liveservertestcase" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.test.LiveServerTestCase">
<em class="property">class </em><tt class="descname">LiveServerTestCase</tt><a class="headerlink" href="https://docs.djangoproject.com/en/1.8/topics/testing/tools/#django.test.LiveServerTestCase" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p><tt class="docutils literal"><span class="pre">LiveServerTestCase</span></tt> does basically the same as
<a class="reference internal" href="https://docs.djangoproject.com/en/1.8/topics/testing/tools/#django.test.TransactionTestCase" title="django.test.TransactionTestCase"><tt class="xref py py-class docutils literal"><span class="pre">TransactionTestCase</span></tt></a> with one extra feature: it launches a
live Django server in the background on setup, and shuts it down on teardown.
This allows the use of automated test clients other than the
<a class="reference internal" href="https://docs.djangoproject.com/en/1.8/topics/testing/tools/#test-client"><em>Django dummy client</em></a> such as, for example, the <a class="reference external" href="http://seleniumhq.org/">Selenium</a>
client, to execute a series of functional tests inside a browser and simulate a
real user’s actions.</p>
<p>By default the live server’s address is <tt class="docutils literal"><span class="pre">'localhost:8081'</span></tt> and the full URL
can be accessed during the tests with <tt class="docutils literal"><span class="pre">self.live_server_url</span></tt>. If you’d like
to change the default address (in the case, for example, where the 8081 port is
already taken) then you may pass a different one to the <a class="reference internal" href="https://docs.djangoproject.com/en/1.8/ref/django-admin/#django-admin-test"><tt class="xref std std-djadmin docutils literal"><span class="pre">test</span></tt></a> command
via the <a class="reference internal" href="https://docs.djangoproject.com/en/1.8/ref/django-admin/#django-admin-option---liveserver"><tt class="xref std std-djadminopt docutils literal"><span class="pre">--liveserver</span></tt></a> option, for example:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span> ./manage.py <span class="nb">test</span> --liveserver<span class="o">=</span>localhost:8082
</pre></div>
</div>
<p>Another way of changing the default server address is by setting the
<cite>DJANGO_LIVE_TEST_SERVER_ADDRESS</cite> environment variable somewhere in your
code (for example, in a <a class="reference internal" href="https://docs.djangoproject.com/en/1.8/topics/testing/advanced/#topics-testing-test-runner"><em>custom test runner</em></a>):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">os</span>
<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s">'DJANGO_LIVE_TEST_SERVER_ADDRESS'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'localhost:8082'</span>
</pre></div>
</div>
<p>In the case where the tests are run by multiple processes in parallel (for
example, in the context of several simultaneous <a class="reference external" href="https://en.wikipedia.org/wiki/Continuous_integration">continuous integration</a>
builds), the processes will compete for the same address, and therefore your
tests might randomly fail with an “Address already in use” error. To avoid this
problem, you can pass a comma-separated list of ports or ranges of ports (at
least as many as the number of potential parallel processes). For example:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span> ./manage.py <span class="nb">test</span> --liveserver<span class="o">=</span>localhost:8082,8090-8100,9000-9200,7041
</pre></div>
</div>
<p>Then, during test execution, each new live test server will try every specified
port until it finds one that is free and takes it.</p>
<p>To demonstrate how to use <tt class="docutils literal"><span class="pre">LiveServerTestCase</span></tt>, let’s write a simple Selenium
test. First of all, you need to install the <a class="reference external" href="https://pypi.python.org/pypi/selenium">selenium package</a> into your
Python path:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span> pip install selenium
</pre></div>
</div>
<p>Then, add a <tt class="docutils literal"><span class="pre">LiveServerTestCase</span></tt>-based test to your app’s tests module
(for example: <tt class="docutils literal"><span class="pre">myapp/tests.py</span></tt>). For this example, we’ll assume you’re using
the <a class="reference internal" href="https://docs.djangoproject.com/en/1.8/ref/contrib/staticfiles/#module-django.contrib.staticfiles" title="django.contrib.staticfiles: An app for handling static files."><tt class="xref py py-mod docutils literal"><span class="pre">staticfiles</span></tt></a> app and want to have static files served
during the execution of your tests similar to what we get at development time
with <tt class="docutils literal"><span class="pre">DEBUG=True</span></tt>, i.e. without having to collect them using
<a class="reference internal" href="https://docs.djangoproject.com/en/1.8/ref/contrib/staticfiles/#django-admin-collectstatic"><tt class="xref std std-djadmin docutils literal"><span class="pre">collectstatic</span></tt></a>. We’ll use
the  <a class="reference internal" href="https://docs.djangoproject.com/en/1.8/ref/contrib/staticfiles/#django.contrib.staticfiles.testing.StaticLiveServerTestCase" title="django.contrib.staticfiles.testing.StaticLiveServerTestCase"><tt class="xref py py-class docutils literal"><span class="pre">StaticLiveServerTestCase</span></tt></a>
subclass which provides that functionality. Replace it with
<tt class="docutils literal"><span class="pre">django.test.LiveServerTestCase</span></tt> if you don’t need that.</p>
<p>The code for this test may look as follows:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.contrib.staticfiles.testing</span> <span class="kn">import</span> <span class="n">StaticLiveServerTestCase</span>
<span class="kn">from</span> <span class="nn">selenium.webdriver.firefox.webdriver</span> <span class="kn">import</span> <span class="n">WebDriver</span>

<span class="k">class</span> <span class="nc">MySeleniumTests</span><span class="p">(</span><span class="n">StaticLiveServerTestCase</span><span class="p">):</span>
    <span class="n">fixtures</span> <span class="o">=</span> <span class="p">[</span><span class="s">'user-data.json'</span><span class="p">]</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">setUpClass</span><span class="p">(</span><span class="n">cls</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">MySeleniumTests</span><span class="p">,</span> <span class="n">cls</span><span class="p">)</span><span class="o">.</span><span class="n">setUpClass</span><span class="p">()</span>
        <span class="n">cls</span><span class="o">.</span><span class="n">selenium</span> <span class="o">=</span> <span class="n">WebDriver</span><span class="p">()</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">tearDownClass</span><span class="p">(</span><span class="n">cls</span><span class="p">):</span>
        <span class="n">cls</span><span class="o">.</span><span class="n">selenium</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">MySeleniumTests</span><span class="p">,</span> <span class="n">cls</span><span class="p">)</span><span class="o">.</span><span class="n">tearDownClass</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">test_login</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">selenium</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">'</span><span class="si">%s%s</span><span class="s">'</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">live_server_url</span><span class="p">,</span> <span class="s">'/login/'</span><span class="p">))</span>
        <span class="n">username_input</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">selenium</span><span class="o">.</span><span class="n">find_element_by_name</span><span class="p">(</span><span class="s">"username"</span><span class="p">)</span>
        <span class="n">username_input</span><span class="o">.</span><span class="n">send_keys</span><span class="p">(</span><span class="s">'myuser'</span><span class="p">)</span>
        <span class="n">password_input</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">selenium</span><span class="o">.</span><span class="n">find_element_by_name</span><span class="p">(</span><span class="s">"password"</span><span class="p">)</span>
        <span class="n">password_input</span><span class="o">.</span><span class="n">send_keys</span><span class="p">(</span><span class="s">'secret'</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">selenium</span><span class="o">.</span><span class="n">find_element_by_xpath</span><span class="p">(</span><span class="s">'//input[@value="Log in"]'</span><span class="p">)</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>
</pre></div>
</div>
<p>Finally, you may run the test as follows:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">$</span> ./manage.py <span class="nb">test </span>myapp.tests.MySeleniumTests.test_login
</pre></div>
</div>
<p>This example will automatically open Firefox then go to the login page, enter
the credentials and press the “Log in” button. Selenium offers other drivers in
case you do not have Firefox installed or wish to use another browser. The
example above is just a tiny fraction of what the Selenium client can do; check
out the <a class="reference external" href="http://selenium-python.readthedocs.org/en/latest/api.html">full reference</a> for more details.</p>
<div class="versionchanged">
<span class="title">Changed in Django 1.7:</span> <p>In older versions, <tt class="docutils literal"><span class="pre">LiveServerTestCase</span></tt> relied on the <a class="reference internal" href="https://docs.djangoproject.com/en/1.8/howto/static-files/"><em>staticfiles
contrib app</em></a> to transparently serve static
files during the execution of tests. This functionality has been moved to
the <a class="reference internal" href="https://docs.djangoproject.com/en/1.8/ref/contrib/staticfiles/#django.contrib.staticfiles.testing.StaticLiveServerTestCase" title="django.contrib.staticfiles.testing.StaticLiveServerTestCase"><tt class="xref py py-class docutils literal"><span class="pre">StaticLiveServerTestCase</span></tt></a>
subclass, so use that subclass if you need <a class="reference internal" href="https://docs.djangoproject.com/en/1.8/howto/static-files/#staticfiles-testing-support"><em>the original behavior</em></a>.</p>
<p><tt class="docutils literal"><span class="pre">LiveServerTestCase</span></tt> now simply publishes the contents of the file system
under <a class="reference internal" href="https://docs.djangoproject.com/en/1.8/ref/settings/#std:setting-STATIC_ROOT"><tt class="xref std std-setting docutils literal"><span class="pre">STATIC_ROOT</span></tt></a> at the <a class="reference internal" href="https://docs.djangoproject.com/en/1.8/ref/settings/#std:setting-STATIC_URL"><tt class="xref std std-setting docutils literal"><span class="pre">STATIC_URL</span></tt></a>.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>When using an in-memory SQLite database to run the tests, the same database
connection will be shared by two threads in parallel: the thread in which
the live server is run and the thread in which the test case is run. It’s
important to prevent simultaneous database queries via this shared
connection by the two threads, as that may sometimes randomly cause the
tests to fail. So you need to ensure that the two threads don’t access the
database at the same time. In particular, this means that in some cases
(for example, just after clicking a link or submitting a form), you might
need to check that a response is received by Selenium and that the next
page is loaded before proceeding with further test execution.
Do this, for example, by making Selenium wait until the <tt class="docutils literal"><span class="pre">&lt;body&gt;</span></tt> HTML tag
is found in the response (requires Selenium &gt; 2.13):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">test_login</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="kn">from</span> <span class="nn">selenium.webdriver.support.wait</span> <span class="kn">import</span> <span class="n">WebDriverWait</span>
    <span class="n">timeout</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="o">...</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">selenium</span><span class="o">.</span><span class="n">find_element_by_xpath</span><span class="p">(</span><span class="s">'//input[@value="Log in"]'</span><span class="p">)</span><span class="o">.</span><span class="n">click</span><span class="p">()</span>
    <span class="c"># Wait until the response is received</span>
    <span class="n">WebDriverWait</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">selenium</span><span class="p">,</span> <span class="n">timeout</span><span class="p">)</span><span class="o">.</span><span class="n">until</span><span class="p">(</span>
        <span class="k">lambda</span> <span class="n">driver</span><span class="p">:</span> <span class="n">driver</span><span class="o">.</span><span class="n">find_element_by_tag_name</span><span class="p">(</span><span class="s">'body'</span><span class="p">))</span>
</pre></div>
</div>
<p class="last">The tricky thing here is that there’s really no such thing as a “page load,”
especially in modern Web apps that generate HTML dynamically after the
server generates the initial document. So, simply checking for the presence
of <tt class="docutils literal"><span class="pre">&lt;body&gt;</span></tt> in the response might not necessarily be appropriate for all
use cases. Please refer to the <a class="reference external" href="http://code.google.com/p/selenium/wiki/FrequentlyAskedQuestions#Q:_WebDriver_fails_to_find_elements_/_Does_not_block_on_page_loa">Selenium FAQ</a> and
<a class="reference external" href="http://seleniumhq.org/docs/04_webdriver_advanced.html#explicit-waits">Selenium documentation</a> for more information.</p>
</div>
</div>
</div>
<div class="section" id="s-test-cases-features">
<span id="test-cases-features"></span><h2>Test cases features<a class="headerlink" href="https://docs.djangoproject.com/en/1.8/topics/testing/tools/#test-cases-features" title="Permalink to this headline">¶</a></h2>
<div class="section" id="s-default-test-client">
<span id="default-test-client"></span><h3>Default test client<a class="headerlink" href="https://docs.djangoproject.com/en/1.8/topics/testing/tools/#default-test-client" title="Permalink to this headline">¶</a></h3>
<dl class="attribute">
<dt id="django.test.SimpleTestCase.client">
<tt class="descclassname">SimpleTestCase.</tt><tt class="descname">client</tt><a class="headerlink" href="https://docs.djangoproject.com/en/1.8/topics/testing/tools/#django.test.SimpleTestCase.client" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Every test case in a <tt class="docutils literal"><span class="pre">django.test.*TestCase</span></tt> instance has access to an
instance of a Django test client. This client can be accessed as
<tt class="docutils literal"><span class="pre">self.client</span></tt>. This client is recreated for each test, so you don’t have to
worry about state (such as cookies) carrying over from one test to another.</p>
<p>This means, instead of instantiating a <tt class="docutils literal"><span class="pre">Client</span></tt> in each test:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">unittest</span>
<span class="kn">from</span> <span class="nn">django.test</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="k">class</span> <span class="nc">SimpleTest</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">test_details</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">'/customer/details/'</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_index</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">'/customer/index/'</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span>
</pre></div>
</div>
<p>...you can just refer to <tt class="docutils literal"><span class="pre">self.client</span></tt>, like so:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.test</span> <span class="kn">import</span> <span class="n">TestCase</span>

<span class="k">class</span> <span class="nc">SimpleTest</span><span class="p">(</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">test_details</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">'/customer/details/'</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_index</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">response</span> <span class="o">=</span> </pre></div></div></div></div></div></div></div></div></body></html>